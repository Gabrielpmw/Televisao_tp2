<header class="app-header">
  
  <div class="header-brand">
    <h1>
      <a routerLink="/" class="brand-link">
        TELEtela
      </a>
    </h1>
  </div>

  <div class="header-actions" #menuContainer>
    
    <button class="icon-button cart-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/>
        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
      </svg>
    </button>

    <div class="profile-container">
      <button 
        (click)="toggleProfile()"
        class="icon-button profile-button"
        [class.active]="isProfileOpen()"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </button>

      @if (isProfileOpen()) {
        <div class="profile-dropdown">
          
          @if (!usuarioLogado) {
            <a routerLink="/login" class="dropdown-item login-register-button">
              Entrar / Registrar
            </a>
          } 
          @else {
            <div class="dropdown-header">
               Ol√°, {{ usuarioLogado.nome || usuarioLogado.username }}
            </div>

            <button (click)="navegarParaPerfil()" class="dropdown-item" style="text-align: left;">
              {{ (usuarioLogado.perfil?.nome === 'adm' || usuarioLogado.perfil?.nome === 'admin') ? 'Painel Administrativo' : 'Minha Conta' }}
            </button>

            <div class="dropdown-divider"></div>

            <button (click)="logout()" class="dropdown-item btn-logout">
               Sair
            </button>
          }

        </div>
      }
    </div>

  </div>
</header>