<div class="container">
  <div class="form-header">
    <h1 id="formTitle">{{ formTitle }}</h1>
    
    <!-- Botão Voltar (Cabeçalho) -->
    <button type="button" class="btn-back" (click)="cancelar()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      Voltar
    </button>
  </div>

  <form id="fabricanteForm" class="fabricante-form" [formGroup]="fabricanteForm" (ngSubmit)="salvar()">
    
    <div class="form-group">
      <label for="razaoSocial">Razão Social *</label>
      <input type="text" id="razaoSocial" formControlName="razaoSocial" required>
    </div>

    <div class="form-group">
      <label for="cnpj">CNPJ *</label>
      <input type="text" id="cnpj" formControlName="cnpj" placeholder="00.000.000/0000-00" required>
    </div>

    <!-- CAMPO DE STATUS REMOVIDO DAQUI -->

    <div class="form-group">
      <label for="anoFundacao">Ano de Fundação *</label>
      <input type="date" id="anoFundacao" formControlName="dataAbertura" required>
    </div>

    <div class="form-group">
      <label for="paisSede">País Sede *</label>
      <input type="text" id="paisSede" formControlName="paisSede" required>
    </div>

    <div class="form-group">
      <label for="telefone">Telefones *</label>
      <div style="display: flex; gap: 1rem;">
        <input type="tel" 
               id="telefone" 
               [formControl]="novoTelefoneControl" 
               placeholder="(00) 00000-0000" 
               style="flex-grow: 1;">
        <button type="button" class="btn-add" (click)="adicionarTelefone()" style="flex-shrink: 0;">
          + Adicionar Telefone
        </button>
      </div>
      <div *ngIf="novoTelefoneControl.touched && novoTelefoneControl.hasError('required')"
           style="color: #ef4444; font-size: 0.875rem; margin-top: 0.5rem;">
        Pelo menos um telefone é obrigatório (para adicionar).
      </div>
      <!-- Validação para a lista de telefones -->
      <div *ngIf="fabricanteForm.hasError('required', 'telefones') || (telefones.length === 0 && novoTelefoneControl.touched)" 
           style="color: #ef4444; font-size: 0.875rem; margin-top: 0.5rem;">
          A lista de telefones não pode estar vazia. Adicione pelo menos um número.
      </div>
    </div>

    <div class="telefones-list" formArrayName="telefones">
      <div *ngFor="let tel of telefones.controls; let i = index" class="telefone-item" [formGroupName]="i">
        <span>({{ tel.value.ddd }}) {{ tel.value.numero }}</span>
        
        <button type="button" class="btn-remover-telefone" (click)="removerTelefone(i)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
          </svg>
        </button>
      </div>
    </div>


    <div class="form-actions">
      <button type="button" class="btn-cancel" (click)="cancelar()">
        Cancelar
      </button>
      <button type="submit" class="btn-submit">
        Salvar
      </button>
    </div>
  </form>
</div>